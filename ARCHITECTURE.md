# System Architecture
# Church Treasury System

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   User Upload Page   â”‚       â”‚   Admin Dashboard       â”‚   â”‚
â”‚  â”‚  http://localhost    â”‚       â”‚  http://localhost/admin â”‚   â”‚
â”‚  â”‚       :5173          â”‚       â”‚                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                                  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                  â”‚
             â”‚  POST /api/receipts/upload       â”‚  GET/PUT /api/receipts
             â”‚  (No Auth)                       â”‚  (JWT Auth)
             â”‚                                  â”‚
             â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REACT FRONTEND (Vite)                        â”‚
â”‚                      Port: 5173                                  â”‚
â”‚                                                                  â”‚
â”‚  Components:                     Pages:                         â”‚
â”‚  â”œâ”€â”€ ReceiptUploadForm.jsx      â”œâ”€â”€ UploadPage.jsx            â”‚
â”‚  â””â”€â”€ ReceiptTable.jsx            â””â”€â”€ AdminDashboard.jsx        â”‚
â”‚                                                                  â”‚
â”‚  Theme: Material-UI (Maroon, White, Black)                     â”‚
â”‚  Router: React Router v6                                        â”‚
â”‚  HTTP Client: Axios                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  HTTP/REST API
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FASTAPI BACKEND SERVER                         â”‚
â”‚                      Port: 8000                                  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      main.py                              â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Routes:                                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ POST /api/login              â†’ Auth                 â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ POST /api/receipts/upload    â†’ Upload + OCR        â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ GET  /api/receipts           â†’ List (Protected)    â”‚  â”‚
â”‚  â”‚  â””â”€â”€ PUT  /api/receipts/{id}      â†’ Update (Protected)  â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Middleware:                                              â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ CORS (localhost:5173)                               â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ JWT Auth (fastapi-jwt-auth)                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€ Static Files (/uploads)                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                    â”‚                              â”‚
â”‚             â–¼                    â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   ocr_utils.py   â”‚  â”‚   database.py    â”‚                   â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚                   â”‚
â”‚  â”‚  - Tesseract OCR â”‚  â”‚  - SQLAlchemy    â”‚                   â”‚
â”‚  â”‚  - Extract price â”‚  â”‚  - Session Mgmt  â”‚                   â”‚
â”‚  â”‚  - Extract date  â”‚  â”‚  - get_db()      â”‚                   â”‚
â”‚  â”‚  - Extract time  â”‚  â”‚                  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚             â”‚                    â”‚                              â”‚
â”‚             â–¼                    â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Image Files     â”‚  â”‚    models.py     â”‚                   â”‚
â”‚  â”‚  /uploads/       â”‚  â”‚                  â”‚                   â”‚
â”‚  â”‚  â””â”€â”€ receipts    â”‚  â”‚  - Admin model   â”‚                   â”‚
â”‚  â”‚                  â”‚  â”‚  - Receipt model â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA STORAGE                                â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   SQLite Database    â”‚       â”‚    File System          â”‚   â”‚
â”‚  â”‚   treasury.db        â”‚       â”‚    /uploads/            â”‚   â”‚
â”‚  â”‚                      â”‚       â”‚                         â”‚   â”‚
â”‚  â”‚  Tables:             â”‚       â”‚  â”œâ”€â”€ receipt_1.jpg      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ admins          â”‚       â”‚  â”œâ”€â”€ receipt_2.jpg      â”‚   â”‚
â”‚  â”‚  â””â”€â”€ receipts        â”‚       â”‚  â””â”€â”€ receipt_3.jpg      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request Flow Diagrams

### 1. User Upload Flow

```
USER BROWSER                 FRONTEND              BACKEND              OCR              DATABASE
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚  1. Select Image         â”‚                     â”‚                  â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚  2. Fill Form            â”‚                     â”‚                  â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚  3. Click Submit         â”‚                     â”‚                  â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚  4. POST /api/      â”‚                  â”‚                   â”‚
     â”‚                          â”‚     receipts/upload â”‚                  â”‚                   â”‚
     â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                   â”‚                   â”‚
     â”‚                          â”‚   (FormData)        â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚  5. Save Image   â”‚                   â”‚
     â”‚                          â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚  6. Run OCR      â”‚                   â”‚
     â”‚                          â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚  7. Return Data  â”‚                   â”‚
     â”‚                          â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚  8. Create Receipt                   â”‚
     â”‚                          â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚  9. Success +       â”‚                  â”‚                   â”‚
     â”‚                          â”‚     OCR Data        â”‚                  â”‚                   â”‚
     â”‚                          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
     â”‚  10. Show Success        â”‚                     â”‚                  â”‚                   â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                  â”‚                   â”‚
     â”‚                          â”‚                     â”‚                  â”‚                   â”‚
```

### 2. Admin Login & View Flow

```
ADMIN BROWSER              FRONTEND              BACKEND              DATABASE
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  1. Go to /admin       â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  2. Enter Credentials  â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  3. Click Login        â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚  4. POST /api/login â”‚                     â”‚
     â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                      â”‚
     â”‚                        â”‚   (FormData)        â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  5. Verify Admin    â”‚
     â”‚                        â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  6. Return User     â”‚
     â”‚                        â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  7. Create JWT      â”‚
     â”‚                        â”‚                     â”‚      Token          â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚  8. Return Token    â”‚                     â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚  9. Store Token     â”‚                     â”‚
     â”‚                        â”‚     localStorage    â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚  10. GET /api/      â”‚                     â”‚
     â”‚                        â”‚      receipts       â”‚                     â”‚
     â”‚                        â”‚      Bearer Token   â”‚                     â”‚
     â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                      â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  11. Verify JWT     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  12. Get Receipts   â”‚
     â”‚                        â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  13. Return Data    â”‚
     â”‚                        â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚  14. Receipt List   â”‚                     â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  15. Display Table     â”‚                     â”‚                     â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
```

### 3. Admin Edit Flow

```
ADMIN BROWSER              FRONTEND              BACKEND              DATABASE
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  1. Click on Price     â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  2. Change Value       â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  3. Click Save         â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚  4. PUT /api/       â”‚                     â”‚
     â”‚                        â”‚     receipts/{id}   â”‚                     â”‚
     â”‚                        â”‚     Bearer Token    â”‚                     â”‚
     â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                      â”‚
     â”‚                        â”‚   (JSON Body)       â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  5. Verify JWT      â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚  6. Update Receipt  â”‚
     â”‚                        â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚                        â”‚  7. Success         â”‚                     â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
     â”‚  8. Exit Edit Mode     â”‚                     â”‚                     â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚
     â”‚                        â”‚                     â”‚                     â”‚
```

---

## Technology Stack Detail

### Frontend Stack
```
React 18.2.0
â”œâ”€â”€ react-router-dom (Routing)
â”œâ”€â”€ @mui/material (UI Components)
â”‚   â”œâ”€â”€ @emotion/react (Styling)
â”‚   â””â”€â”€ @emotion/styled (Styled components)
â”œâ”€â”€ axios (HTTP Client)
â””â”€â”€ Vite 5.0.8 (Build Tool)
```

### Backend Stack
```
FastAPI 0.104.1
â”œâ”€â”€ uvicorn (ASGI Server)
â”œâ”€â”€ sqlalchemy (ORM)
â”‚   â””â”€â”€ sqlite (Database)
â”œâ”€â”€ pytesseract (OCR)
â”‚   â””â”€â”€ Pillow (Image Processing)
â”œâ”€â”€ fastapi-jwt-auth (Authentication)
â”œâ”€â”€ passlib (Password Hashing)
â”‚   â””â”€â”€ bcrypt (Hashing Algorithm)
â””â”€â”€ python-multipart (File Uploads)
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY LAYERS                          â”‚
â”‚                                                                  â”‚
â”‚  1. CORS Policy                                                 â”‚
â”‚     â””â”€â”€ Only allows localhost:5173                             â”‚
â”‚                                                                  â”‚
â”‚  2. Password Security                                           â”‚
â”‚     â”œâ”€â”€ Bcrypt hashing (cost factor 12)                        â”‚
â”‚     â””â”€â”€ No plaintext storage                                    â”‚
â”‚                                                                  â”‚
â”‚  3. JWT Authentication                                          â”‚
â”‚     â”œâ”€â”€ Signed tokens (HMAC-SHA256)                            â”‚
â”‚     â”œâ”€â”€ 24-hour expiration                                      â”‚
â”‚     â””â”€â”€ Stateless verification                                  â”‚
â”‚                                                                  â”‚
â”‚  4. Route Protection                                            â”‚
â”‚     â”œâ”€â”€ Public: /upload                                         â”‚
â”‚     â””â”€â”€ Protected: /receipts, /update (requires JWT)           â”‚
â”‚                                                                  â”‚
â”‚  5. Input Validation                                            â”‚
â”‚     â”œâ”€â”€ File type checking (images only)                        â”‚
â”‚     â””â”€â”€ Required field validation                               â”‚
â”‚                                                                  â”‚
â”‚  6. Database Security                                           â”‚
â”‚     â”œâ”€â”€ SQLAlchemy ORM (SQL injection prevention)              â”‚
â”‚     â””â”€â”€ Parameterized queries                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture (Future)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PRODUCTION                               â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Frontend (Static)  â”‚       â”‚   Backend (API)         â”‚   â”‚
â”‚  â”‚   Vercel/Netlify     â”‚       â”‚   Heroku/AWS/Railway    â”‚   â”‚
â”‚  â”‚   + CDN              â”‚       â”‚   + Gunicorn            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                              â”‚                    â”‚
â”‚             â”‚                              â”‚                    â”‚
â”‚             â–¼                              â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Browser Cache      â”‚       â”‚   Load Balancer         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚                   â”‚
â”‚                                             â–¼                   â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                  â”‚   PostgreSQL Database   â”‚   â”‚
â”‚                                  â”‚   (Managed Service)     â”‚   â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚                   â”‚
â”‚                                             â–¼                   â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                  â”‚   S3/Cloud Storage      â”‚   â”‚
â”‚                                  â”‚   (Receipt Images)      â”‚   â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure Tree

```
church-treasury/
â”‚
â”œâ”€â”€ README.md                    # Main documentation
â”œâ”€â”€ QUICKSTART.md               # Quick start guide
â”œâ”€â”€ .gitignore                  # Git ignore rules
â”‚
â”œâ”€â”€ backend/                    # Python FastAPI backend
â”‚   â”œâ”€â”€ main.py                 # FastAPI app & routes (200 lines)
â”‚   â”œâ”€â”€ models.py               # SQLAlchemy models (50 lines)
â”‚   â”œâ”€â”€ database.py             # DB config (40 lines)
â”‚   â”œâ”€â”€ ocr_utils.py            # OCR logic (100 lines)
â”‚   â”œâ”€â”€ requirements.txt        # Python dependencies (10 lines)
â”‚   â”œâ”€â”€ run.sh                  # Unix run script
â”‚   â”œâ”€â”€ run.ps1                 # Windows run script
â”‚   â”œâ”€â”€ API_TESTING.md          # API testing guide
â”‚   â”œâ”€â”€ BACKEND_SUMMARY.md      # Backend documentation
â”‚   â”œâ”€â”€ treasury.db             # SQLite database (auto-created)
â”‚   â”œâ”€â”€ venv/                   # Python virtual env (git ignored)
â”‚   â””â”€â”€ uploads/                # Receipt images
â”‚       â”œâ”€â”€ .gitkeep
â”‚       â””â”€â”€ 20251109_*.jpg      # Timestamped receipts
â”‚
â””â”€â”€ frontend/                   # React Vite frontend
    â”œâ”€â”€ package.json            # npm dependencies
    â”œâ”€â”€ vite.config.js          # Vite configuration
    â”œâ”€â”€ index.html              # HTML entry point
    â”œâ”€â”€ run.sh                  # Unix run script
    â”œâ”€â”€ node_modules/           # npm packages (git ignored)
    â”œâ”€â”€ dist/                   # Build output (git ignored)
    â””â”€â”€ src/
        â”œâ”€â”€ main.jsx            # React entry point
        â”œâ”€â”€ App.jsx             # Main app with routing
        â”œâ”€â”€ api.js              # Axios instance
        â”œâ”€â”€ pages/
        â”‚   â”œâ”€â”€ UploadPage.jsx         # User upload page (80 lines)
        â”‚   â””â”€â”€ AdminDashboard.jsx     # Admin dashboard (150 lines)
        â””â”€â”€ components/
            â”œâ”€â”€ ReceiptUploadForm.jsx  # Upload form (150 lines)
            â””â”€â”€ ReceiptTable.jsx       # Editable table (180 lines)
```

**Total Code:**
- Backend: ~400 lines Python
- Frontend: ~560 lines JavaScript/JSX
- **Total: ~1000 lines of actual code**

---

## Data Flow Summary

1. **User uploads receipt** â†’ Image saved to `/uploads/` â†’ OCR extracts data â†’ Saved to database
2. **Admin logs in** â†’ JWT token generated â†’ Token stored in browser
3. **Admin views receipts** â†’ Token verified â†’ Database queried â†’ Data returned
4. **Admin edits OCR field** â†’ Token verified â†’ Database updated â†’ UI refreshed

---

Built for simplicity, security, and church use! ğŸ›ï¸âœ¨
